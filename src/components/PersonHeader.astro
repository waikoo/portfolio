---
import PersonHeaderLink from "./PersonHeaderLink.astro";
import PersonNameTag from "./PersonNameTag.astro";

const { endpoint } = Astro.props;

const lowercasedEndpoint = endpoint.toLowerCase();
const { url: currentUrl } = Astro.request;
const isOnProjects = currentUrl.includes(endpoint.toLowerCase());
const isOnCV = currentUrl.includes("cv");
const isOnContact = currentUrl.includes("contact");
const isOnAbout = currentUrl.includes("about");
---

<script>
  window.addEventListener("scroll", () => {
    const header = document.querySelector("header");
    if (header) {
      if (window.scrollY > 0) {
        header.classList.add("bg-[#15000c]");
        header.classList.add("bg-opacity-80");
        header.classList.add("drop-shadow-md");
        header.classList.add("z-50");
      } else {
        header.classList.remove("bg-[#15000c]");
        header.classList.remove("bg-opacity-80");
        header.classList.remove("drop-shadow-md");
        header.classList.remove("z-50");
      }
    }
  });
</script>

<header
  class="flex justify-between px-[100px] items-center sticky top-0 z-50 isolate"
>
  <ul class="flex text-[#e296f5] text-[1rem] gap-[20px]">
    <PersonHeaderLink href="/">Home</PersonHeaderLink>
    <PersonHeaderLink
      href={`/${lowercasedEndpoint}`}
      isCurrentPage={isOnProjects}>Projects</PersonHeaderLink
    >
    <PersonHeaderLink href={`/${lowercasedEndpoint}/cv`} isCurrentPage={isOnCV}
      >CV</PersonHeaderLink
    >

    <PersonHeaderLink
      href={`/${lowercasedEndpoint}/contact`}
      isCurrentPage={isOnContact}>Contact</PersonHeaderLink
    >
    <PersonHeaderLink
      href={`/${lowercasedEndpoint}/about`}
      isCurrentPage={isOnAbout}>About</PersonHeaderLink
    >
  </ul>

  <PersonNameTag familyName="SZÁSZ" name="EVELIN" />
</header>

<style>
  header {
    transition: background-color 0.2s ease-out;
  }
</style>
