---
import PersonLinks from "./PersonLinks.astro";
import PersonNameTag from "./PersonNameTag.astro";
import IconHamburger from "./IconHamburger.astro";

const { familyName, name } = Astro.props;

const lowercasedName = name.toLowerCase();
---

<script>
  const currentUrl = new URL(window.location.href);
  const headerBgOnScroll = currentUrl.toString().includes("barna")
    ? "bg-[#0D1205]"
    : "bg-[#15000c]";

  // sticky header styles
  window.addEventListener("scroll", () => {
    const header = document.querySelector("header");
    if (header) {
      if (window.scrollY > 0) {
        header.classList.add(headerBgOnScroll);
        header.classList.add("bg-opacity-80");
        header.classList.add("drop-shadow-md");
        header.classList.add("backdrop-blur-sm");
        header.classList.add("z-50");
      } else {
        header.classList.remove(headerBgOnScroll);
        header.classList.remove("bg-opacity-80");
        header.classList.remove("drop-shadow-md");
        header.classList.remove("backdrop-blur-sm");
        header.classList.remove("z-50");
      }
    }
  });

  const hamburgerIcon = document.querySelector(".hamburger-icon");
  const hamburgerMenu = document.querySelector(".hamburger-menu");

  if (hamburgerIcon && hamburgerMenu) {
    hamburgerIcon.addEventListener("click", () => {
      hamburgerMenu.classList.remove("hidden");
    });
  }
</script>

<header class={`sticky top-0 z-50 isolate`}>
  <div
    class={`mx-auto w-[90%] flex flex-row justify-between items-center -translate-y-[12px] py-6`}
  >
    <PersonNameTag
      familyName={familyName.toUpperCase()}
      name={name.toUpperCase()}
    />
    <PersonLinks
      lowercasedName={lowercasedName}
      className="hidden lg:flex lg:flex-row gap-[20px]"
    />
    <IconHamburger
      name={lowercasedName}
      className="lg:hidden h-full flex flex-col justify-center mt-3 hamburger-icon"
    />
  </div>
</header>

<style>
  header {
    transition: background-color 0.2s ease-out;
  }
</style>
