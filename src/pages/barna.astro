---
import Layout from "../layouts/Layout.astro";
import BarnaProjectCard from "../components/BarnaProjectCard.astro";
import BarnaLayout from "../components/BarnaLayout.astro";
import { projects } from "../projects/data";

// const referer = Astro.request.headers.get("referer");
const referer = "";
---

<script>
  const circle = document.querySelector(".barna-circle");

  setTimeout(() => {
    if (circle) {
      circle.classList.add("move-circle");
    }
  }, 10);

  setTimeout(() => {
    if (circle) {
      circle.classList.add("vanish");
    }
  }, 500);

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("show");
      } else {
        entry.target.classList.remove("show");
      }
    });
  });
  const elements = document.querySelectorAll(".barna-project");
  elements.forEach((el) => observer.observe(el));
</script>

<Layout title="SzÃ¡sz Barna's Projects">
  <BarnaLayout>
    <div class="-mt-[13.5rem] ml-[33rem]">
      {projects.map((project) => <BarnaProjectCard {...project} />)}
    </div>
  </BarnaLayout>
</Layout>
